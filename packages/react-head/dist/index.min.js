!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.ReactHead={},e.React,e.ReactDOM)}(this,function(e,u,c){"use strict";function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function l(e,t){if(!e)throw new Error("Invariant failed")}var t=u.createContext(null),r=t.Consumer,a=t.Provider,i=function(a){function e(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))||this).state={canUseDOM:!1},e.headTags=null,e.index=-1,e}n(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this.props,t=e.tag,n=e.name,r=e.property;this.setState({canUseDOM:!0}),this.index=this.headTags.addClientTag(t,n||r)},t.componentWillUnmount=function(){this.headTags.removeClientTag(this.props.tag,this.index)},t.render=function(){var a=this,e=this.props,i=e.tag,o=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,["tag"]);return u.createElement(r,null,function(e){if(e||l(!1),a.headTags=e,a.state.canUseDOM){if(!e.shouldRenderTag(i,a.index))return null;var t=u.createElement(i,o);return c.createPortal(t,document.head)}var n=(""+e.whitelist).split(",").includes(i)?{}:{"data-rh":""},r=u.createElement(i,s({},n,o));return e.addServerTag(r),null})},e}(u.Component);var o=["title","meta"],p=function(r){function e(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(i=r.call.apply(r,[this].concat(t))||this).indices=new Map,i.state={addClientTag:function(r,a){if(-1===o.indexOf(r))return-1;i.setState(function(e){var t,n=e[r]||[];return(t={})[r]=[].concat(n,[a]),t});var e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i).indices,t=e.has(r)?e.get(r)+1:0;return e.set(r,t),t},shouldRenderTag:function(e,t){if(-1===o.indexOf(e))return!0;var n=i.state[e];return n&&n.lastIndexOf(n[t])===t},removeClientTag:function(r,a){i.setState(function(e){var t,n=e[r];return n?(n[a]=null,(t={})[r]=n,t):null})},addServerTag:function(r){var e=i.props.headTags||[];if(-1!==o.indexOf(r.type)){var t=e.findIndex(function(e){var t=e.props.name||e.props.property,n=r.props.name||r.props.property;return e.type===r.type&&t===n});-1!==t&&e.splice(t,1)}e.push(r)},whitelist:i.props.whitelist||""},i}n(e,r);var t=e.prototype;return t.componentDidMount=function(){var e=""+this.state.whitelist?","+this.state.whitelist:"",t=document.head.querySelectorAll('[data-rh=""]'+e);Array.prototype.forEach.call(t,function(e){return e.parentNode.removeChild(e)})},t.render=function(){return"undefined"!=typeof window||Array.isArray(this.props.headTags)||l(!1),u.createElement(a,{value:this.state},this.props.children)},e}(u.Component);e.Title=function(e){return u.createElement(i,s({tag:"title"},e))},e.Style=function(e){return u.createElement(i,s({tag:"style"},e))},e.Meta=function(e){return u.createElement(i,s({tag:"meta"},e))},e.Link=function(e){return u.createElement(i,s({tag:"link"},e))},e.HeadProvider=p,Object.defineProperty(e,"__esModule",{value:!0})});
